{% extends "base.html" %}
{% block content %}
<h2>{{ class_obj.course.course_name }} - My Attendance</h2>
<div class="card mb-3">
    <div class="card-body">
        <h3>Attendance: <span class="badge bg-{{ 'success' if percentage >= 75 else 'danger' }}">{{ percentage }}%</span></h3>
    </div>
</div>
<div class="card">
    <div class="card-body">
        <table class="table">
            <thead><tr><th>Date</th><th>Time</th><th>Status</th><th>Marked At</th></tr></thead>
            <tbody>
            {% for session, attendance in records %}
            <tr>
                <td>{{ session.date }}</td>
                <td>{{ session.start_time.strftime('%H:%M') }} - {{ session.end_time.strftime('%H:%M') }}</td>
                <td>
                    {% if attendance %}
                    <span class="badge bg-{{ 'success' if attendance.status == 'present' else 'danger' }}">
                        {{ attendance.status|title }}
                    </span>
                    {% else %}
                    <span class="badge bg-secondary">Not Marked</span>
                    {% endif %}
                </td>
                <td>{{ attendance.marked_at.strftime('%Y-%m-%d %H:%M') if attendance else 'N/A' }}</td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}